# JPAê°€ ì¸ì‹í•˜ëŠ” ê°’íƒ€ì„

### ê°’ íƒ€ì… ë¶„ë¥˜

- ì—”í‹°í‹° íƒ€ì…
- ê°’ íƒ€ì…
    - ê¸°ë³¸ê°’ íƒ€ì…
        - ìë°” ê¸°ë³¸ íƒ€ì… : int, double
        - ë˜í¼ í´ë˜ìŠ¤ : Integer, Long
        - String
    - ì„ë² ë””ë“œ íƒ€ì… : embedded type, ë³µí•© ê°’ íƒ€ì…
        - í´ë˜ìŠ¤ ì²˜ëŸ¼ ë¬¶ì–´ì„œ ê°’ì„ ê´€ë¦¬í•˜ë©´ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ì€ë° ì—”í‹°í‹°ê°„ ê°’ì´ ê³µìœ ê°€ ë˜ì§€ ì•ŠìŒ
        - ê°ì²´ë¡œ ê°’íƒ€ì…ì„ ê´€ë¦¬í•˜ë©´ì„œ ê°ì²´ì˜ íŠ¹ì„±ì¸ ë©”ì„œë“œë„ í™œìš© í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŒ
        - í´ë˜ìŠ¤ ì§€ì •í•˜ëŠ” ê³³ì— Embadable ë§¤í•‘í•˜ëŠ”ê³³ì— Embaded
    - ì»¬ë ‰ì…˜ ê°’ íƒ€ì… : collection value type

### ê°’ íƒ€ì…ì„ ì™œ ì•Œì•„ì•¼ë˜ëŠ”ë°?

- ì‚¬ìš©í•˜ëŠ” ê°’ íƒ€ì…ì— ê³µìœ ê°€ ë˜ê³  ì•ˆë˜ëŠ” ì„±ì§ˆì´ ìˆì–´ ìƒí™©ì— ë§ê²Œ ê°œë°œí•˜ê¸° ìœ„í•´ì„œ ì•Œì•„ì•¼í•œë‹¤.

# ì—”í‹°í‹° íƒ€ì…

> @Entityë¡œ ì €ìœ¼ì´í•˜ëŠ” ê°ì²´ë¡œ ë°ì´í„°ê°€ ë³€í•´ë„ ì‹ë³„ìë¡œ ì¶”ì ì´ ê°€ëŠ¥í•˜ë‹¤.
> 

<aside>
ğŸ’¡ ì—”í‹°í‹° íƒ€ì…ì€ ê°ìì˜ ë²ˆí˜¸ê°€ ì íŒ ì˜·ì„ ì…ê³  ìˆëŠ” ìƒí™©ì´ë‹¤. ì•„ë¬´ë¦¬ ì„±í˜•ìœ¼ë¡œ ì–¼êµ´ì„ ëœ¯ì–´ ê³ ì³ë„ ì˜·ì— ì íŒ ë²ˆí˜¸ë¥¼ ë³´ê³  ì•„ ë„ˆ ëˆ„êµ¬êµ¬ë‚˜ í•˜ê³  ì•Œì•„ë³¼ ìˆ˜ ìˆë‹¤.

</aside>

# ê°’ íƒ€ì…

> ë”°ë¡œ ì‹ë³„ìê°€ ì—†ê³  ê·¸ëƒ¥ ê°’ ê·¸ ìì²´ê°€ ì‹ë³„ìë¡œ ì‘ìš©í•˜ëŠ” íƒ€ì„.
> 

<aside>
ğŸ’¡ 1ì´ë©´ 1ì´ì§€ 100ì´ê² ëŠëƒ~ 100ì´ë©´ 100ì´ì§€ 1ì´ê² ëŠëƒ~

</aside>

### ê¸°ë³¸ê°’ íƒ€ì…

- String, int â€¦
- ìƒëª… ì£¼ê¸°ë¥¼ ì—”í‹°í‹°ì— ì˜ì¡´í•¨. ì¦‰ ì—”í‹°í‹°ê°€ ì‚¬ë¼ì§€ë©´ ê°™ì´ ì‚¬ë¼ì§
- ê°’ íƒ€ì…ì€ ì—”í‹°í‹°ë¼ë¦¬ ì ˆëŒ€ ê³µìœ ë¼ì„  ì•ˆëœë‹¤.(ì•„ë˜ì˜ ê²½ìš°ëŠ” ê³µìœ ê°€ ë¨ìœ¼ë¡œ ëŒ€ì°¸ì‚¬ê°€ ì¼ì–´ë‚˜ëŠ” ê²½ìš°)

```java
Member memberA = new Member("ìƒìˆ˜");
memberB = memberA;  // ì–‡ì€ ë³µì‚¬
memberB.SetName("ë¯¼ê·œ");

System.out.println("memberAì˜ ì´ë¦„ : " + memberA.GetName());   // ë¯¼ê·œ
System.out.println("memberBì˜ ì´ë¦„ : " + memberB.GetName());   // ë¯¼ê·œ
```

- ìœ„ì˜ ê²½ìš° memberëŠ” ì°¸ì¡°ê°’ì„ ê°€ì§€ëŠ” ê°ì²´ì´ì§€ë§Œ(ìŠ¤íƒì— ì°¸ì¡°ê°’ì´ í™ì— ì‹¤ì§ˆ ê°ì²´ì˜ ì •ë³´ê°€ ì¡´ì¬) ìë°”ì˜ primitive typeì€ ì• ì´ˆì— ìŠ¤íƒ ì˜ì—­ì— ì°íˆê¸° ë•Œë¬¸ì— ê³µìœ  ë  ìˆ˜ê°€ ì—†ìŒ.

### ì„ë² ë””ë“œ íƒ€ì…

> ê°™ì€ ìœ í˜•ì˜ í•„ë“œë¥¼ í•œ ë²ˆì— ê°ì²´ë¡œ ë¬¶ì–´ì„œ ê´€ë¦¬í•˜ê²Œ í•´ì£¼ëŠ” JPAì˜ ê°’íƒ€ì….
> 

### ì™œ ì‚¬ìš©í•˜ëŠ”ë°?

- ê°™ì€ ìœ í˜•ì˜ í…Œì´ë¸”ì˜ í•„ë“œê°’ì„ ìë°” ì‚¬ì´ë“œì—ì„œ ë¬¶ì–´ì„œ ê´€ë¦¬ í•  ìˆ˜ ìˆê²Œ ë˜ì–´ ì½”ë“œì˜ ê°€ë…ì„±, ì¬ì‚¬ìš©ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.
- ë˜í•œ ì„ë² ë””ë“œ í´ë˜ìŠ¤ ë‚´ì— ë³„ë„ì˜ ë©”ì„œë“œë¥¼ ì •ì˜í•´ì„œ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.

### ì„ë² ë””ë“œ íƒ€ì… ë„ì… ì „í›„ ë¹„êµí•˜ê¸°

- ì„ë² ë””ë“œ íƒ€ì… ì‚¬ìš© x

```java
@Entity
@NoArgsConstructor
@Getter
@Setter
public class Member {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "MEMBER_ID")
    private Long memberId;

    @Column(name = "NAME", nullable = false)
    private String name;
    
    @Column(name = "STARTDATE", nullable = false)
    private LocalDateTime startDate;
    
    @Column(name = "ENDDATE", nullable = false)
    private LocalDateTime endDate;
    
    @Column(name = "CITY", nullable = false)
    private String city;

    @Column(name = "STREET", nullable = false)
    private String street;

    @Column(name = "ZIPCODE", nullable = false)
    private String zipcode;

}
```

ì„ë² ë””ë“œ íƒ€ì… ì‚¬ìš© 

```java
@Entity
@NoArgsConstructor
@Getter
@Setter
public class Member {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "MEMBER_ID")
    private Long memberId;

    @Column(name = "NAME", nullable = false)
    private String name;

    @Embedded
    private WorkPeriod workPeriod;
    
    @Embedded
    private Address address;

}

@Embeddable
@NoArgsConstructor
@Getter
public class Address {

    @Column(name = "CITY", nullable = false)
    private String city;

    @Column(name = "STREET", nullable = false)
    private String street;

    @Column(name = "ZIPCODE", nullable = false)
    private String zipcode;
    
    // ì¸ìŠ¤í„´ìŠ¤ ë§¤ì„œë“œ ì •ì˜ë„ ê°€ëŠ¥í•˜ë‹¤.
    public void toStringAddress() {
        System.out.println(this.city + " " + this.street + " " + this.zipcode);
    }
}

@Embeddable
@NoArgsConstructor
@Getter
public class WorkPeriod {

    @Column(name = "STARTDATE", nullable = false)
    private LocalDateTime startDate;

    @Column(name = "ENDDATE", nullable = false)
    private LocalDateTime endDate;

}
```

- ì„ë² ë””ë“œ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê°™ì€ ìœ í˜•ì˜ í•„ë“œ ê°’ì„ ë¬¶ì–´ì„œ ê´€ë¦¬ í•  ìˆ˜ ìˆê²Œ ë˜ë©´ì„œ Memer ì—”í‹°í‹°ì˜ êµ¬ì¡°ê°€ ê°„ë‹¨í•˜ê²Œ ë³€í–ˆìŒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.
- ë˜í•œ ê°ì²´ì´ê¸° ë•Œë¬¸ì— ë³„ë„ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ ì„ ì–¸í•´ì„œ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë©´ í•„ë“œì— ëŒ€í•œ ë‹¤ì–‘í•œ ë©”ì„œë“œë¥¼ ê´€ë¦¬í•˜ê¸°ê°€ ìš©ì´í•´ì§„ë‹¤.
    
    ```java
    Member member = new Member();
    Address address = new Address("ë‰´ìš•", "ê°•ì„œë¡œ", "3842");
    member.setAddress(address);
    member.getAddress().toStringAddress();   // "ë‰´ìš• ê°•ì„œë¡œ 3842"
    ```
    

### ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ê±´ë°?

1. ì„ë² ë””ë“œ íƒ€ì… í´ë˜ìŠ¤ ìƒì„± â†’ `@Enbeddable` ë¶™ì´ê³  ê¸°ë³¸ ìƒì„±ì`@NoArgsConstructor` ë¶™ì—¬ì£¼ê¸° `@Setter` ì„¤ì • í•˜ì§€ ë§ê¸°

```java
@Embeddable
@NoArgsConstructor
@Getter
public class WorkPeriod {

    @Column(name = "STARTDATE", nullable = false)
    private LocalDateTime startDate;

    @Column(name = "ENDDATE", nullable = false)
    private LocalDateTime endDate;

}
```

1. ì„ë² ë””ë“œ íƒ€ì… í´ë˜ìŠ¤ë¥¼ ì—”í‹°í‹°ì— ì‚¬ìš©í•˜ê¸° â†’ ì„ë² ë”ë¸” íƒ€ì… ì‚¬ìš©í•œë‹¤ëŠ” ëœ»ìœ¼ë¡œ `@Embedded` ë¶™ì—¬ì£¼ê³  ì„ ì–¸í•´ì£¼ê¸°(ê·¼ë³¸ì ìœ¼ë¡œ ê°’ íƒ€ì…ì´ê¸° ë•Œë¬¸ì— `private String name` ì„ ì–¸í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.)

```java
@Entity
@NoArgsConstructor
@Getter
@Setter
public class Member {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "MEMBER_ID")
    private Long memberId;

    @Column(name = "NAME", nullable = false)
    private String name;

    @Embedded
    private WorkPeriod workPeriod;
    
    @Embedded
    private Address address;

}
```

### ì£¼ì˜ì 

- ì„ë² ë””ë“œ íƒ€ì…ì€ ì°¸ì¡°ê°’ì„ ê°€ì§€ëŠ” í´ë˜ìŠ¤ì´ê¸° ë•Œë¬¸ì— ìì¹« ì˜ëª»í•˜ë©´ ì„œë¡œ ë‹¤ë¥¸ ì—”í‹°í‹°ê°€ ë™ì¼í•œ ì„ë² ë””ë“œ í´ë˜ìŠ¤ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ì„ë² ë””ë“œ íƒ€ì… ì„¤ê³„ì‹œ @Setter ì„¤ì • ìì²´ë¥¼ ì—†ì•  í˜¹ì‹œë¼ë„ ê³µìœ ê°€ ëì„ ê²½ìš° í•´ë‹¹ í´ë˜ìŠ¤ì˜ ê°’ì„ ë³€ê²½ ë¶ˆê°€ë¡œ ë§Œë“¤ì–´ ì»´íŒŒì¼ ì—ëŸ¬ë¥¼ ë„ì›Œì•¼í•œë‹¤. ì•„ë‹ˆë©´ ì˜¤ë¥˜ë„ ì•ˆ ë‚˜ê¸° ë•Œë¬¸ì— ë‹µì´ì—†ë‹¤.
- ê·¸ëŸ¬ë©´ ê¸°ì¡´ì˜ ì—”í‹°í‹°ì— ì„ë² ë””ë“œ íƒ€ì…ìœ¼ë¡œ ì„¤ì •ëœ ê°’ì„ ë³€ê²½í•  ìˆ˜ ì—†ì–ì•„?
    - ê·¸ëƒ¥ í•´ë‹¹ ì—”í‹°í‹°ì— ìƒˆë¡œìš´ ì„ë² ë””ë“œ íƒ€ì… ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë‹¤ì‹œ ë„£ì–´ì£¼ëŠ”ê²Œ ìœ ì§€ë³´ìˆ˜ ì°¨ì›ì—ì„œ ë‚«ë‹¤.